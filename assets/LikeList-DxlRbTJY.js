import{r as _,o as g,a as b,b as l,c as i,d as r,e,F as m,q as v,h as f,w as c,f as k,t as x,u as y}from"./index-DGkBJbzT.js";import{_ as w}from"./PageTitle-Djt-DbFm.js";import{f as L}from"./format-CRl3Pp5k.js";import{s as h,a as $}from"./sweetAlert-CCyWe-_C.js";const C={class:"flex items-center justify-between"},P={class:"flex items-center gap-2 md:gap-4"},B=["src"],N={class:"font-bold hover:text-secondary hover:underline hover:underline-offset-2"},V={class:"text-xs text-[#9B9893] md:text-sm"},j={class:"flex items-center gap-3 md:mr-10 md:gap-9"},D=["onClick"],F=e("span",{class:"material-symbols-outlined text-xl leading-none md:text-2xl"},"thumb_up",-1),R=e("p",{class:"text-sm md:text-base"},"取消",-1),T=[F,R],q=e("span",{class:"material-symbols-outlined text-xl leading-none md:text-2xl"}," arrow_circle_right ",-1),A=e("p",{class:"text-sm md:text-base"},"查看",-1),I={__name:"LikeList",setup(E){const d=_([]),n=_(!1);async function u(){var a,o;n.value=!0;try{const t=await f.get("http://127.0.0.1:3000/user/getLikePosts");d.value=t.data.likePosts}catch(t){h({icon:"error",title:((o=(a=t.response)==null?void 0:a.data)==null?void 0:o.message)||t.message})}n.value=!1}async function p(a){$({icon:"warning",title:"確定要取消按讚嗎",text:"注意：此操作將無法復原",onConfirm:async()=>{var o,t;n.value=!0;try{await f.delete(`http://127.0.0.1:3000/post/${a}/unlike`),u()}catch(s){h({icon:"error",title:((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||s.message})}n.value=!1}})}return g(()=>{u()}),(a,o)=>{const t=b("RouterLink");return l(),i(m,null,[r(w,{title:"我按讚的貼文"}),e("ul",null,[(l(!0),i(m,null,v(d.value,s=>(l(),i("li",{key:s.user._id,class:"relative mb-4 rounded-lg border-2 border-primary bg-white p-4",style:{"box-shadow":"0px 3px 0px #000400"}},[e("div",C,[e("div",P,[r(t,{to:`/user/${s.user._id}/posts`},{default:c(()=>[e("img",{src:s.user.photo,alt:"大頭貼",class:"h-10 w-10 rounded-full object-cover"},null,8,B)]),_:2},1032,["to"]),e("div",null,[e("h3",N,[r(t,{to:`/user/${s.user._id}/posts`},{default:c(()=>[k(x(s.user.name),1)]),_:2},1032,["to"])]),e("span",V," 發文時間："+x(y(L)(s.createdAt)),1)])]),e("div",j,[e("button",{type:"button",onClick:M=>p(s._id),class:"flex flex-col items-center font-bold text-secondary"},T,8,D),r(t,{to:`/post/${s._id}`,class:"flex flex-col items-center font-bold"},{default:c(()=>[q,A]),_:2},1032,["to"])])])]))),128))])],64)}}};export{I as default};

import{h as V,r as c,C as E,a as n,b as _,c as v,e as a,w as f,F,d as l,i as L,k as g,f as B}from"./index-COQyUUYm.js";import{s as C}from"./sweetAlert-BQoRJUAf.js";const N=l("h2",{class:"mb-9 text-center text-2xl font-bold leading-tight text-primary"}," 到元宇宙展開全新社交圈 ",-1),R={class:"mb-4"},M={class:"flex border-2 border-primary bg-white px-4 py-3"},T={key:0,class:"mt-1 block text-sm text-danger"},$={class:"mb-8"},S={class:"flex border-2 border-primary bg-white px-4 py-3"},U={key:0,class:"mb-4 mt-1 block text-center text-sm text-danger"},q=["disabled"],D={__name:"SignIn",setup(A){const h=V(),i=c(!1),e=c({});let x="";const o=c(!0);E(()=>e.value.email,r=>{r===x?o.value=!1:o.value=!0});const p=c(!1);async function k(){var r,s;i.value=!0,o.value=!0,p.value=!1;try{const t=await L.post("https://node-training-2024.onrender.com/user/sign_in",e.value),{token:d,expires:u}=t.data;document.cookie=`MetaWallToken=${d}; expires=${new Date(u)}`,h.push("/")}catch(t){t.response.data.message==="此帳號尚未註冊"?(o.value=!1,x=`${e.value.email}`):t.response.data.message==="密碼不正確"?p.value=!0:C({icon:"error",title:((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||t.message})}i.value=!1}return(r,s)=>{const t=n("VueLoading"),d=n("VField"),u=n("ErrorMessage"),w=n("RouterLink"),y=n("VForm");return _(),v(F,null,[a(t,{active:i.value,"onUpdate:active":s[0]||(s[0]=m=>i.value=m)},null,8,["active"]),N,a(y,{ref:"form",onSubmit:k,style:{"font-family":"'Azeret Mono', 'Noto Sans TC', sans"}},{default:f(m=>[l("div",R,[l("div",M,[a(d,{name:"Email",rules:"required|email",modelValue:e.value.email,"onUpdate:modelValue":s[1]||(s[1]=b=>e.value.email=b),type:"email",placeholder:"請輸入 Email",class:"block w-full"},null,8,["modelValue"])]),a(u,{name:"Email",class:"mt-1 block text-sm text-danger"}),!m.errors.Email&&!o.value?(_(),v("span",T," 此 Email 帳號尚未註冊 ")):g("",!0)]),l("div",$,[l("div",S,[a(d,{name:"密碼",rules:"required|password",modelValue:e.value.password,"onUpdate:modelValue":s[2]||(s[2]=b=>e.value.password=b),type:"password",placeholder:"請輸入密碼",class:"block w-full"},null,8,["modelValue"])]),a(u,{name:"密碼",class:"mt-1 block text-sm text-danger"})]),p.value?(_(),v("span",U," 帳號或密碼錯誤，請重新輸入！ ")):g("",!0),l("button",{type:"submit",class:"block w-full rounded-lg border-2 border-primary bg-secondary py-4 text-white shadow-[-2px_2px_0px_#000400] disabled:border-[#808080] disabled:bg-[#A8B0B9] disabled:shadow-none sm:px-[130px]",disabled:Object.keys(m.errors).length!==0||!e.value.email||!e.value.password||!o.value}," 登入 ",8,q),a(w,{to:"/sign/up",class:"hover: block py-4 text-center underline-offset-8 hover:underline"},{default:f(()=>[B(" 註冊帳號 ")]),_:1})]),_:1},512)],64)}}};export{D as default};
